<!DOCTYPE html>
<!-- saved from url=(0054)file:///C:/Users/artur/Downloads/mafia.html/mafia.html -->
<html lang="hy"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Մաֆիա խաղ</title>
  <style>
    
    body {
      font-family: Arial, sans-serif;
      background-color: #f9f9f9;
      padding: 20px;
      color: #333;
    }
    
    .container {
      max-width: 600px;
      margin: 0 auto;
      background: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 0 12px rgba(0,0,0,0.1);
    }
    h2 {
      text-align: center;
      margin-bottom: 20px;
      color: #222;
    }
    label {
      display: flex;
      justify-content: space-between;
      margin: 8px 0;
      font-size: 16px;
    }
    input[type=number] {
      width: 60px;
      padding: 5px;
      font-size: 16px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    button {
      margin-top: 15px;
      width: 100%;
      padding: 12px;
      font-size: 18px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 7px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #0056b3;
    }
    #rolesSelection {
      margin-bottom: 20px;
    }
    #gameArea {
      margin-top: 25px;
      background: #f0f8ff;
      border-radius: 8px;
      padding: 15px;
      text-align: center;
      font-size: 18px;
      line-height: 1.4;
    }
    #gameArea button {
      width: auto;
      margin: 10px 5px 0 5px;
      padding: 10px 20px;
    }
    .hidden {
      display: none;
    }
    #rules {
      margin-top: 25px;
      background: #e9ecef;
      padding: 15px;
      border-radius: 8px;
      white-space: pre-wrap;
      font-size: 14px;
      line-height: 1.5;
      max-height: 400px;
      overflow-y: auto;
    }
    #endGameInfo {
      margin-top: 25px;
      background: #fff3cd;
      border-radius: 8px;
      padding: 15px;
      font-family: monospace;
      font-size: 16px;
      white-space: pre-wrap;
    }
   body {
  background-color: #000000; /* чёрный фон */
  color: #ffffff; /* белый текст */
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 20px;
}

h2 {
  color: #ff4444;
  text-shadow: 0 0 10px #ff0000;
  text-align: center;
  margin-bottom: 20px;
}

/* Контейнер с тёмным фоном */
.container {
  max-width: 600px;
  margin: 0 auto;
  background-color: #111111;
  color: #ffffff;
  border-radius: 10px;
  padding: 20px;
  box-shadow: 0 0 12px rgba(255, 0, 0, 0.6);
}

label {
  display: flex;
  justify-content: space-between;
  margin: 8px 0;
  font-size: 16px;
  color: #fff;
}

input[type=number] {
  width: 60px;
  padding: 5px;
  font-size: 16px;
  border-radius: 5px;
  border: 1px solid #444;
  background-color: #222;
  color: #fff;
}

button {
  margin-top: 15px;
  width: 100%;
  padding: 12px;
  font-size: 18px;
  background-color: #8b0000;
  color: #ffffff;
  border: 2px solid #ff4444;
  border-radius: 7px;
  cursor: pointer;
  transition: background-color 0.3s ease;
  box-shadow: 0 0 10px #ff0000;
}

button:hover {
  background-color: #ff4444;
  color: #000000;
}

#gameArea {
  margin-top: 25px;
  background: #220000;
  border-radius: 8px;
  padding: 15px;
  text-align: center;
  font-size: 18px;
  line-height: 1.4;
  color: #fff;
}

#rules, #endGameInfo {
  margin-top: 25px;
  background: #330000;
  padding: 15px;
  border-radius: 8px;
  white-space: pre-wrap;
  font-size: 14px;
  line-height: 1.5;
  max-height: 400px;
  overflow-y: auto;
  color: #fff;
}

.hidden {
  display: none;
}


  </style>
  
  
</head>
<body>
  <div class="container">
    <h2>Մաֆիա խաղ</h2>
    <p>Ընտրեք, թե քանի խաղացող պետք է լինի յուրաքանչյուր դերից, ապա սեղմեք «Սկսել խաղը»։ <br>Առնվազն պետք է լինի 5 խաղացող մինիմում և 40 առավելագույն։</p>

    <div id="rolesSelection"><label>
      <span>Մաֆիոզ</span>
      <input type="number" id="role_0" min="0" max="40" value="0">
    </label><label>
      <span>Խաղաղ բնակիչ</span>
      <input type="number" id="role_1" min="0" max="40" value="0">
    </label><label>
      <span>Բժիշկ</span>
      <input type="number" id="role_2" min="0" max="40" value="0">
    </label><label>
      <span>Շերիֆ</span>
      <input type="number" id="role_3" min="0" max="40" value="0">
    </label><label>
      <span>Երկրպագու</span>
      <input type="number" id="role_4" min="0" max="40" value="0">
    </label><label>
      <span>Դատավոր</span>
      <input type="number" id="role_5" min="0" max="40" value="0">
    </label><label>
      <span>Փաստաբան</span>
      <input type="number" id="role_6" min="0" max="40" value="0">
    </label><label>
      <span>Քահանա</span>
      <input type="number" id="role_7" min="0" max="40" value="0">
    </label><label>
      <span>Կնքահայր</span>
      <input type="number" id="role_8" min="0" max="40" value="0">
    </label><label>
      <span>Մոլագար</span>
      <input type="number" id="role_9" min="0" max="40" value="0">
    </label><label>
      <span>Կործանիչ</span>
      <input type="number" id="role_10" min="0" max="40" value="0">
    </label><label>
      <span>Իրազեկող</span>
      <input type="number" id="role_11" min="0" max="40" value="0">
    </label><label>
      <span>Լուսնոտ</span>
      <input type="number" id="role_12" min="0" max="40" value="0">
    </label><label>
      <span>Բանտապահ</span>
      <input type="number" id="role_13" min="0" max="40" value="0">
    </label><label>
      <span>Թիկնապահ</span>
      <input type="number" id="role_14" min="0" max="40" value="0">
    </label><label>
      <span>Յակուձա</span>
      <input type="number" id="role_15" min="0" max="40" value="0">
    </label><label>
      <span>Խարդախ</span>
      <input type="number" id="role_16" min="0" max="40" value="0">
    </label><label>
      <span>Հիասքանչ</span>
      <input type="number" id="role_17" min="0" max="40" value="0">
    </label><label>
      <span>Գող</span>
      <input type="number" id="role_18" min="0" max="40" value="0">
    </label></div>

    <button id="startBtn" onclick="startGame()">Սկսել խաղը</button>
    <button onclick="toggleRules()">Ցուցադրել / Թաքցնել կանոնները</button>

    <div id="gameArea" class="hidden">
      <p id="playerRoleText"></p>
      <button id="showRoleBtn" onclick="showRole()">Բացել դերը</button>
      <button id="hideRoleBtn" onclick="hideRole()" class="hidden">Փակել դերը և փոխանցել հաջորդին</button>
    </div>

    <div id="endGameInfo" class="hidden"></div>

    <div id="rules" class="hidden">
      Մաֆիա խաղի կանոններ

      Խաղի նպատակը՝
      - Մաֆիայի անդամները պետք է սպանեն բոլոր խաղաղ բնակիչներին։
      - Խաղաղ բնակիչները պետք է բացահայտեն մաֆիոզներին և հեռացնեն նրանց։

      Խաղի փուլերը՝

      Գիշերային փուլ
      --------------------
      1. Մաֆիոզները «արթնանում» են և ընտրում զոհի մեկ անձին։
      2. Բժիշկը «արթնանում» է և ընտրում մեկին փրկելու։
      3. Դետեկտիվը ստուգում է մեկի դերը։
      4. Վկան, պահապանը, օրինապահը և մյուս հատուկ դերերը ըստ հերթականության կատարում են իրենց գործողությունները։

      Ցերեկային փուլ
      --------------------
      - Բոլորը բացում են աչքերը։<br>
      - Քննարկում են և քվեարկում՝ որոշելու համար, թե ով կվերացվի խաղից։<br>
      - Հեռացված խաղացողը կբացահայտի իր դերը։

      Դերերի բացատրություն
      --------------------
      - <b>Մաֆիոզ</b> — Գիշերը, երբ կրակելու հերթը հասնում է մաֆիայի, հաղորդավարը հայտարարում է. «Մաֆիան արթնացել է և զոհ է ընտրում»: Մաֆիոզները բացում են իրենց աչքերը և ժեստերի օգնությամբ պայմանավորվում են, թե ում սպանեն: Երբ նրանք համաձայնեցին և իրենց ընտրությունը հայտնեցին հաղորդավարին, նա հայտարարում է. «Մաֆիան կրակել է և քնել»: Հաջորդ առավոտ մաֆիայի զոհը հայտարարվում է սպանված (եթե ոչ ոք նրան չի պաշտպանել):
      Մի մոռացեք, որ նկարահանումներին մասնակցում են նաև մաֆիայի հատուկ կերպարներ։<br>
      - <b>Բժիշկ</b> — Կրակելուց առաջ կարող է ընտրել այլ խաղացող: Այս խաղացողին չի կարելի սպանել այս գիշեր:Գիշերը, մինչ մաֆիայի տեղաշարժը, հաղորդավարը հայտարարում է. «Բժիշկը արթնացել է»։ Նա բացում է աչքերը և ցույց տալիս այն խաղացողին, ում ցանկանում է պաշտպանել: Հետո հաղորդավարն ասում է. «Բժիշկը քնեց»։ Եթե այս գիշերվա ընթացքում բժշկի ընտրած խաղացողը պետք է սպանվեր, նա չի մահանում. Սակայն ոչ մարդասպանը պետք է իմանա, որ իր կրակոցը ապարդյուն էր, ոչ էլ բախտավորը, որ փորձել են սպանել իրեն։<br>
      - <b>Շերիֆ</b> — Կարող է գնդակահարել մեկ խաղացողի:Գիշերը, մաֆիայի քայլից հետո, հաղորդավարը հայտարարում է. «Շերիֆն արթնացել է»։ Նա բացում է աչքերը և ցույց տալիս նրան, ում ցանկանում է կրակել։ Այնուհետև հաղորդավարն ասում է. «Շերիֆը քնեց»: Հաջորդ առավոտյան բնակիչները փողոցում հայտնաբերում են ևս մեկ դի։ Շեֆը ունի ևս մեկ խաղալու ձև նա նաև կարող ես ստուգել խաղացողի դերը եվ արտահայտվելու ժամանակ ասել նա մաֆիա է թե ոչ բայց պետք է հաշվի առնել որ դրանից հետո նրան կարող են սպանել։։<br>
      - <b>Երկրպագու</b> — Կարող է ընտրել մեկ խաղացող: Եթե սա առաջնորդ է, ճանաչեք նրա դերը:Գիշերը, մաֆիայի քայլից հետո, հաղորդավարը հայտարարում է. «Մի երկրպագու արթնացել է»: Նա բացում է աչքերը և ցույց տալիս նրան, ում ցանկանում է ստուգել։ Հաղորդավարը գլխով է անում, եթե առաջնորդն է, իսկ գլուխը բացասաբար է թափահարում, եթե ղեկավարը չէ: Այնուհետև հաղորդավարն ասում է. «Երկրպագուը քնեց»:<br>
      - <b>Դատավոր</b> — Գիշերը կարող է պարզել մեկ խաղացողի դերը: Օրվա ընթացքում դա կարող է փրկել մեկ խաղացողի լինչից:
      Գիշերը, մաֆիայի քայլից հետո, հաղորդավարը հայտարարում է. «Դատավորն արթնացել է»։ Նա բացում է աչքերը և ցույց տալիս նրան, ում ցանկանում է ստուգել։ Հաղորդավարը դատավորին ցույց է տալիս մի փոքրիկ քարտ՝ թեստավորվող խաղացողի դերով: Հետո խոսում է հաղորդավարը. «Դատավորը քնեց».
      Օրվա ընթացքում, եթե քվեարկության արդյունքներով խաղացողը պետք է լինչի ենթարկվի, բայց դատավորը հանդես եկավ ի պաշտպանություն (ձեռքը չբարձրացրեց), հաղորդավարը հայտարարում է, որ խաղացողն արդարացված է։ Իհարկե, նա չպետք է բացահայտի դատավորի ինքնությունը (սակայն, խաղացողները կարող են փորձել նույնականացնել դատավորին նրանց մեջ, ովքեր ձեռք չեն բարձրացրել): Այդուհանդերձ, դատավորը կարող է արգելափակել քվեարկությունն այս եղանակով միայն օրական մեկ անգամ. հաջորդ դատապարտյալը, ամենայն հավանականությամբ, լինչի ենթարկվելու է:
      Նկատենք, որ դատավորը փաստացի կարող է իրեն անձեռնմխելիություն ապահովել օրվա քվեարկության ժամանակ։ Այնուամենայնիվ, նա կարող է դատապարտվել, եթե նա վատնի իր հնարավորությունը մեկ այլ խաղացողի վրա և դառնա լինչի հաջորդ թեկնածուն:<br>
      - <b>Փաստաբան</b> — Կարող է ճանաչել մեկ խաղացողի դերը:Գիշերը, մինչ մաֆիայի տեղաշարժը, հաղորդավարը հայտարարում է. «Փաստաբանն արթնացավ». Նա բացում է աչքերը և ցույց տալիս խաղացողին, ում ցանկանում է ստուգել: Հաղորդավարը փաստաբանին ցույց է տալիս մի փոքրիկ բացիկ՝ թեստավորվող խաղացողի դերով: Հետո հաղորդավարն ասում է. «Փաստաբանը քնեց»։
      Կրակոցների գիշերը փաստաբանը կարող է օգտագործել իր իմացած տեղեկությունը, բայց նա դեռ պետք է մյուս մաֆիոզներին համոզի, որ իր ընտրությունը ճիշտ է։ Նա իրավունք չունի բարձրաձայնել այն, ինչ սովորել է գիշերը, և չի կարող ուղղակիորեն տեղեկացնել իր հանցակիցներին, որ ինքը իրավաբան է։<br>
      - <b>Քահանա</b> — Կարող է կամ գնդակահարել մեկ խաղացողի, կամ պարզել նրա դերը: Այս խաղացողը բացահայտում է քահանայի ինքնությունը:
      Գիշերը, մաֆիայի քայլից հետո, հաղորդավարը հայտարարում է. «Քահանան արթնացել է»։ Նա բացում է աչքերը և որոշում, թե ում է ուզում ստուգել կամ կրակել։ Ստուգելու համար նա ցույց է տալիս խաղը սովորական ձևով, կրակելու համար, կարծես կրակելու համար: Հաղորդավարը կարող է պարզաբանել, թե ինչ է ունեցել խաղացողը vi-ում, և նա պետք է հաստատի իր ընտրությունը գլխի շարժումով կամ այլ ժեստով: Այնուհետև ստուգման դեպքում հաղորդավարը քահանային ցույց է տալիս ստուգվող խաղացողի դերով փոքրիկ բացիկ և դիպչում ստուգվողին, որպեսզի նա բացի աչքերը և պարզի, թե խաղացողներից ով է քահանան։ Երբ քահանայի գործողությունը ավարտվում է, առաջնորդն ասում է. «Քահանան կքնի, քահանայի կողմից ստուգված խաղացողը նույնպես փակում է իր աչքերը:։<br>
      - <b>Կնքահայր</b> — Կարող է ընտրել մեկ խաղացող: Այս խաղացողը չի կարող քվեարկել օրվա ընթացքում:Գիշերը, մաֆիայի քայլից հետո, հաղորդավարը հայտարարում է. «Կնքահայրն արթնացել է»։ Նա բացում է աչքերը և ցույց տալիս այն խաղացողին, ում ցանկանում է զրկել ձայնի իրավունքից։ Այնուհետև հաղորդավարն ասում է. «Կնքահայրը քնեց»: Հաջորդ առավոտյան հաղորդավարը հայտարարում է, թե որ խաղացողը չի կարող քվեարկել (սակայն նա իրավունք ունի մասնակցել քննարկմանը և մեղադրվել)։ Քվեարկությունն իրականացվում է այնպես, կարծես այս խաղացողը գոյություն չունի։ Նա ոչ կողմ է քվեարկում, ոչ դեմ։<br>
      - <b>Մոլագար</b> — Կարող է հարվածել մեկ խաղացողի:Գիշերը, մաֆիայի քայլից հետո, հաղորդավարը հայտարարում է. «Մոլագարն արթնացել է»։ Նա բացում է աչքերը և ցույց տալիս նրան, ում ցանկանում է կրակել։ Այնուհետև հաղորդավարն ասում է՝ «մոլագարը քնեց»։ Հաջորդ առավոտյան բնակիչները փողոցում հայտնաբերում են ևս մեկ դի։<br>
      - <b>Կործանիչ</b> — Կարող է գնդակահարել խաղացողներից մեկին, եթե նա սովորական մարդ չէ։Գիշերը, մաֆիայի քայլից հետո, հաղորդավարը հայտարարում է. «կործանիչն արթնացավ»: Նա բացում է աչքերը և ցույց տալիս նրան, ում ցանկանում է կրակել։ Այնուհետև հաղորդավարն ասում է. «կործանիչը քնեց»: Եթե ընտրված խաղացողը սովորական մարդ չէ (այլ կերպ ասած՝ նա մաֆիոզ է, առաջնորդ կամ այլ հատուկ քաղաքացիական անձ), նրան սպանում են, ինչի մասին հաղորդում է հաղորդավարը առավոտյան։<br>
      - <b>Իրազեկող</b> — Կարող է ընտրել մեկ խաղացող: Եթե որևէ մեկը ճանաչում է այս խաղացողի դերը, հաղորդավարը պետք է զեկուցի, որ այս խաղացողը մաֆիոզ է:
      Գիշերը, մինչ մաֆիան շարժվում է, հաղորդավարը հայտարարում է. «Իրազեկողը արթնացել է»։ Նա բացում է աչքերը և ցույց տալիս այն խաղացողին, ում ցանկանում է զրպարտել: Այնուհետև հաղորդավարն ասում է. «Իրազեկողը քնեց»։ Եթե այդ գիշեր ինչ-որ մեկը ստուգում է ընտրված խաղացողին (ցանկանում է իմանալ նրա դերը), հաղորդավարը պետք է ցույց տա մաֆիայի քարտը խաղացողի իրական դերի փոխարեն: Եթե ստուգումն անում է լրագրողը, հաղորդավարն իրեն այնպես է պահում, կարծես որպես տեղեկատու ընտրված խաղացողը մաֆիոզ է։
      Խորհուրդ չի տրվում տեղեկատուին ներմուծել այնպիսի խաղի մեջ, որտեղ չկա մեկ կերպար, որը կարող է ճանաչել այլ խաղացողների դերերը:<br>
      - <b>Լուսնոտ</b> — Ձևացնում է, թե մաֆիոզներից մեկն է. Եթե մաֆիան սպանի, մաֆիան կարող է կրակել մեկ այլ խաղացողի վրա:Ամեն անգամ, երբ հաղորդավարը հայտարարում է, որ մաֆիան արթնացել է, Լուսնոտը նույնպես բացում է աչքերը և իրեն մաֆիայի պես է պահում։ Նա ոչ մեկին չպետք է ասի, թե որն է իր դերը և խաղացողներից ով է մաֆիան: Եթե իսկական մաֆիոզները պարզեն Լուսնոտը նա է (օրինակ՝ նրա քվեարկությամբ), կարող են սպանել նրան գիշերը, իսկ դրանից անմիջապես հետո նորից կրակոցի իրավունք են ստանում։<br>
      - <b>Բանտապահ</b> — Կարող է ճանաչել մեկ խաղացողի դերը: Եթե այս խաղացողը հանցագործ է, ապա նրան անմիջապես բանտ են ուղարկում։ Բանտապահի մահից հետո բոլոր բանտարկյալները դուրս են գալիս բանտից:
      Գիշերը, մաֆիայի քայլից հետո, հաղորդավարը հայտարարում է. «Բանտապահն արթնացել է»։ Նա բացում է աչքերը և ցույց տալիս խաղացողին, ում ցանկանում է ստուգել: Հաղորդավարը բանտապահին ցույց է տալիս մի փոքրիկ բացիկ, որում պատկերված է փորձարկվող խաղացողի դերը: Այնուհետև առաջնորդն ասում է. «Բանտապահը քնեց»։
      Եթե ստուգված խաղացողը պարզվում է, որ հանցագործ է, նա անմիջապես բանտ է նստում։ Այս պահից նա չի կարող օգտագործել իր ունակությունները, իսկ առավոտյան առաջնորդը հայտարարում է, թե ով է գերի դարձել։ Բանտարկյալները իրավունք չունեն քվեարկելու, կրակելու, լիազորություններ օգտագործելու, բայց կարող են մասնակցել քննարկումներին։ Եթե բանտապահը սպանվի, բոլոր բանտարկյալներն ազատ են արձակվում և հետ են ստանում իրենց բոլոր իրավունքները:
      Բանտապահի ազդեցությունը չի վերաբերում մեկ անձի, բայց բանտապահը դեռ ճանաչում է իր դերը:Եթե բանտապահը ստուգել է իրազեկողի կողմից զրպարտված խաղացողի դերը, ապա այս խաղացողը համարվում է մաֆիոզ և բանտ է նստում, նույնիսկ եթե նա իսկապես քաղաքացիական անձ է:<br>
      - <b>Թիկնապահ</b> — Մինչ կրակելը նա կարող է ընտրել այլ խաղացողի։ Մեռնում է իր փոխարեն, եթե նրան սպանեն այդ գիշեր։Գիշերը, մինչ մաֆիայի շարժվելը, հաղորդավարը հայտարարում է. «Թիկնապահն արթնացել է»։ Նա բացում է աչքերը և մատնացույց անում այն խաղացողին, ում ցանկանում է պաշտպանել: Հետո հաղորդավարն ասում է. «Թիկնապահը քնեց»։ Եթե այդ գիշեր թիկնապահի ընտրած խաղացողը սպանվի, նա չի մահանում, փոխարենը մահանում է թիկնապահը։ Պաշտպանված խաղացողը չպետք է իմանա, որ նրանք փորձում էին սպանել իրեն։<br>
      - <b>Յակուձա</b> — Յակուձան ևս մեկ հանցավոր խմբավորում է, որը մրցում է մաֆիայի հետ քաղաքում իշխանության համար: Յակուձան կարող է օգտագործվել խաղի մեջ հետևյալ կանոնների համաձայն. Նախ, պետք է լինի 12 կամ ավելի խաղացող: Երկրորդ, մաֆիոզների դերերը կիսով չափ կիսվում են մաֆիայի և յակուձայի միջև (օրինակ, եթե խաղում պետք է լինի 4 մաֆիոզ, ապա նրանցից 2-ը դառնում են յակուձան, իսկ 2-ը դառնում են մաֆիա): Երրորդ, Յակուզա խաղը չպետք է օգտագործի միայնակ կերպարներ կամ հատուկ մաֆիայի կերպարներ:
      Յակուձան կրակում է հենց մաֆիայից հետո, սակայն ենթադրվում է, որ երկու խմբերի կրակոցները միաժամանակ են եղել։ Այսպիսով, եթե մաֆիան իր կրակոցով սպանել է յակուձաներից մեկին, ապա այս յակուզան դեռ պահպանում է այդ գիշեր մահացող կրակոցը վերցնելու իրավունքը։
      Յակուձայի հետ խաղում հաղթելու համար հանցախումբը պետք է ոչ միայն զրկի խաղաղ բնակիչներին հաղթելու հնարավորությունից, այլև հեռացնի մյուս ճամբարից բոլոր մրցակիցներին։ Այսպիսով, Յակուձան հաղթում է, եթե խաղաղ բնակիչները չկարողանան հաղթել, և բոլոր մաֆիոզները սպանվեն:<br>
      - <b>Խարդախ</b> — Կարող է ընտրել մեկ խաղացող: Օրվա ընթացքում այս խաղացողը քվեարկում է նույն կերպ, ինչ խարդախը։Գիշերը, մաֆիայի քայլից հետո, հաղորդավարը հայտարարում է. «Խարդախն արթնացել է»։ Նա բացում է աչքերը և մատնացույց անում այն խաղացողին, ում ձայնը նա ցանկանում է օգտագործել: Այնուհետև հաղորդավարն ասում է. «Խարդախը քնեց». Հաջորդ առավոտ, ձայները հաշվելիս, հաղորդավարը ընտրված խաղացողին ասում է, թե ինչպես պետք է քվեարկի (ելնելով, թե ինչպես է քվեարկել խարդախը): Միաժամանակ հաղորդավարը չպետք է բացահայտի, թե որ խաղացողն է խարդախը (եթե ինքն իրեն չբացահայտի)։<br>
      - <b>Հիասքանչ</b> — Մինչ մյուս գործողությունները, մեկ խաղացող կարող է ընտրվել: Այս խաղացողը չի կարող այդ գիշեր օգտագործել իր ունակությունները, բայց նաև չի կարող սպանվել։Գիշերը, մինչ մաֆիայի տեղաշարժը, հաղորդավարը հայտարարում է. «Գեղեցկուհին արթնացել է»։ Նա բացում է աչքերը և մատնացույց անում այն խաղացողին, ում ցանկանում է զրկել իր ունակություններից և միևնույն ժամանակ պաշտպանել: Այնուհետև հաղորդավարն ասում է. «Գեղեցկուհին քնեց»։ Եթե այդ գիշերվա ընթացքում գեղեցկուհու ընտրած խաղացողը պետք է սպանվի, նա չի մահանում։ Սակայն ոչ մարդասպանը պետք է իմանա, որ բաց է թողել, ոչ էլ բախտավորը, որ փորձում էին սպանել իրեն։ Բացի այդ, գեղեցկուհու ընտրած խաղացողն այս գիշեր չի օգտագործում իր հնարավորությունները, թեև ինքն էլ չգիտի այդ մասին (հաղորդավարը դա ասում է ցերեկը)նա կատարել է գործողությունը, ինչպես սպասվում էր, բայց դա որևէ հետևանքի չի հանգեցնում):Եթե գեղեցկուհին ընտրել է խաղի միակ մաֆիոզին, ապա մաֆիան այդ գիշեր ոչ ոքի չի սպանում։ Եթե ընտրված է մաֆիոզ, բայց կան այլ հանցագործներ, ապա սպանությունը տեղի է ունենում սովորականի պես։<br>
      - <b>Գող</b> — Կարող է ընտրել խաղացողներից մեկին: Այս խաղացողը չի կարող այդ գիշեր օգտագործել իրենց ունակությունները:Գիշերը, մինչ մաֆիան շարժվում է, հաղորդավարը հայտարարում է. «Գող է արթնացել»։ Նա բացում է աչքերը և մատնացույց անում այն խաղացողին, ում ցանկանում է զրկել իր ունակություններից։ Հետո հաղորդավարն ասում է. «Գողը քնեց»։ Ընտրված խաղացողն այդ գիշեր չի օգտագործում իր ունակությունները, թեև ինքն էլ չգիտի այդ մասին (հաղորդավարը զանգահարում է այս խաղացողին և թույլ է տալիս կատարել գործողությունը, ինչպես սպասվում էր, բայց դա որևէ հետևանքի չի հանգեցնում):<br>
      - <b>Խաղաղ բնակիչ</b> — Չունի հատուկ կարողություններ, մասնակցում է գործընթացին միայն քվեարկությամբ։
      
      Խաղի ավարտը՝
      - Եթե բոլոր մաֆիոզները մահացած են՝ հաղթում են խաղաղ բնակիչները։<br>
      - Եթե մաֆիան մեծամասնություն է ունենում՝ հաղթում է մաֆիան։  
    </div>
  </div>

  <script>
    
    const allRoles = [
      {name:"Մաֆիոզ", desc:""},
      {name:"Խաղաղ բնակիչ", desc:""},
      {name:"Բժիշկ", desc:""},
      {name:"Շերիֆ", desc:""},
      {name:"Երկրպագու", desc:""},
      {name:"Դատավոր", desc:""},
      {name:"Փաստաբան", desc:""},
      {name:"Քահանա", desc:""},
      {name:"Կնքահայր", desc:""},
      {name:"Մոլագար", desc:""},
      {name:"Կործանիչ", desc:""},
      {name:"Իրազեկող", desc:""},
      {name:"Լուսնոտ", desc:""},
      {name:"Բանտապահ", desc:""},
      {name:"Թիկնապահ", desc:""},
      {name:"Յակուձա", desc:""},
      {name:"Խարդախ", desc:""},
      {name:"Հիասքանչ", desc:""},
      {name:"Գող", desc:""}
      
    ];

    let selectedRoles = [];
    let playersRoles = [];
    let currentPlayerIndex = 0;

    function createRolesSelection() {
  const container = document.getElementById("rolesSelection");
  container.innerHTML = "";
  
  allRoles.forEach((role, i) => {
    const label = document.createElement("label");
    label.innerHTML = `
      <span>${role.name}</span>
      <input type="number" id="role_${i}" min="0" max="40" value="0" />
    `;
    container.appendChild(label);
  });

  // Добавляем обработчики для всех input
  allRoles.forEach((_, i) => {
    const input = document.getElementById(`role_${i}`);
    input.addEventListener('input', () => {
      limitTotalSum(40); // ограничение суммы до 40
    });
  });
}

function limitTotalSum(maxTotal) {
  const inputs = allRoles.map((_, i) => document.getElementById(`role_${i}`));
  let sum = 0;

  // Считаем сумму значений
  inputs.forEach(input => {
    sum += Number(input.value) || 0;
  });

  if (sum > maxTotal) {
    // Если сумма превышает максимум, то нужно откатить последнее изменение
    // Один из способов — уменьшить последнее поле до нужного значения:

    // Находим последнее изменённое поле (оно будет тем, у которого фокус)
    const activeInput = document.activeElement;
    if (inputs.includes(activeInput)) {
      const excess = sum - maxTotal;
      let newValue = Number(activeInput.value) - excess;
      if (newValue < 0) newValue = 0;
      activeInput.value = newValue;
    }
  }
}


    function toggleRules() {
      const rules = document.getElementById("rules");
      rules.classList.toggle("hidden");
    }

    function startGame() {
      selectedRoles = [];
      playersRoles = [];
      currentPlayerIndex = 0;
      document.getElementById("endGameInfo").classList.add("hidden");
      document.getElementById("gameArea").classList.remove("hidden");

      // Հավաքում ենք ընտրված դերերը
      let total = 0;
      allRoles.forEach((role, i) => {
        const cnt = parseInt(document.getElementById(`role_${i}`).value) || 0;
        total += cnt;
        for (let j = 0; j < cnt; j++) {
          selectedRoles.push(role);
        }
      });
      if (total < 5) {
        alert("Խաղի համար առնվազն 5 խաղացող է պետք։");
        return;
      }
      // Խառնել
      playersRoles = shuffleArray(selectedRoles);
      // Վերցնել առաջին
      showNextPlayer();
    }

    function showNextPlayer() {
      if (currentPlayerIndex >= playersRoles.length) {
        // բոլոր խաղացողները տեսել են իրենց դերը
        document.getElementById("gameArea").classList.add("hidden");
        showEndGameInfo();
        return;
      }
      const text = `Խաղացող ${currentPlayerIndex+1}, սեղմեք «Բացել դերը»`;
      document.getElementById("playerRoleText").innerText = text;
      document.getElementById("showRoleBtn").classList.remove("hidden");
      document.getElementById("hideRoleBtn").classList.add("hidden");
    }

    function showRole() {
      const role = playersRoles[currentPlayerIndex];
      const text = `Դուք Խաղացող ${currentPlayerIndex+1}\nԴերը՝ ${role.name}\n\n${role.desc}`;
      document.getElementById("playerRoleText").innerText = text;
      document.getElementById("showRoleBtn").classList.add("hidden");
      document.getElementById("hideRoleBtn").classList.remove("hidden");
    }

    function hideRole() {
      currentPlayerIndex++;
      showNextPlayer();
    }

    function showEndGameInfo() {
      let info = "\nԽաղացողների դերերը՝\n\n";
      playersRoles.forEach((r,i) => {
        info += `Խաղացող ${i+1}: ${r.name}\n`;
      });
      document.getElementById("endGameInfo").innerText = info;
      document.getElementById("endGameInfo").classList.remove("hidden");
    }

    function shuffleArray(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i+1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    // Երբ էջը բեռնվում է՝ պատրաստում ենք դերի ընտրության դաշտերը
    window.onload = createRolesSelection;
    
  </script>
  <b>Հեղինակ՝ Արթուր Եղյան</b>


</body></html>